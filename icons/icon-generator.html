<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PWA Icon Generator</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .container {
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h1 {
      color: #333;
      margin-bottom: 10px;
    }
    .subtitle {
      color: #666;
      margin-bottom: 30px;
    }
    .preview-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 20px;
      margin: 30px 0;
    }
    .preview-item {
      text-align: center;
      padding: 15px;
      background: #f9f9f9;
      border-radius: 8px;
    }
    .preview-item canvas {
      max-width: 100%;
      border: 1px solid #ddd;
      border-radius: 4px;
      background: white;
    }
    .preview-item p {
      margin: 10px 0 5px 0;
      font-weight: 600;
      color: #333;
    }
    .preview-item small {
      color: #666;
    }
    button {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 600;
      margin: 10px 5px;
      transition: transform 0.2s;
    }
    button:hover {
      transform: translateY(-2px);
    }
    button:active {
      transform: translateY(0);
    }
    .button-group {
      margin: 20px 0;
      text-align: center;
    }
    .status {
      margin: 20px 0;
      padding: 15px;
      background: #e7f3ff;
      border-left: 4px solid #2196F3;
      border-radius: 4px;
      display: none;
    }
    .status.show {
      display: block;
    }
    .instructions {
      background: #fff3cd;
      border-left: 4px solid #ffc107;
      padding: 15px;
      margin: 20px 0;
      border-radius: 4px;
    }
    .instructions h3 {
      margin-top: 0;
      color: #856404;
    }
    .instructions ol {
      margin: 10px 0;
      padding-left: 20px;
    }
    .instructions li {
      margin: 8px 0;
      color: #856404;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ¨ PWA Icon Generator</h1>
    <p class="subtitle">SVGë¥¼ PNG ì•„ì´ì½˜ìœ¼ë¡œ ìë™ ë³€í™˜</p>

    <div class="instructions">
      <h3>ğŸ“‹ ì‚¬ìš© ë°©ë²•</h3>
      <ol>
        <li>"ëª¨ë“  ì•„ì´ì½˜ ìƒì„±" ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”</li>
        <li>ê° ì•„ì´ì½˜ì˜ "ë‹¤ìš´ë¡œë“œ" ë²„íŠ¼ì„ ëˆŒëŸ¬ ì €ì¥í•˜ì„¸ìš”</li>
        <li>ë‹¤ìš´ë¡œë“œí•œ íŒŒì¼ì„ <code>icons/</code> í´ë”ì— ë„£ìœ¼ì„¸ìš”</li>
        <li>favicon.icoëŠ” í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— ë„£ìœ¼ì„¸ìš”</li>
      </ol>
    </div>

    <div class="button-group">
      <button onclick="generateAllIcons()">ğŸš€ ëª¨ë“  ì•„ì´ì½˜ ìƒì„±</button>
    </div>

    <div id="status" class="status"></div>

    <div class="preview-grid" id="iconGrid"></div>
  </div>

  <script>
    const svgContent = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="512" height="512">
  <defs>
    <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
    </linearGradient>
  </defs>
  <rect width="512" height="512" fill="url(#grad)" rx="80"/>
  <text x="256" y="300" font-size="160" font-weight="bold" text-anchor="middle" fill="white" font-family="Arial, sans-serif">PWA</text>
  <circle cx="256" cy="380" r="8" fill="white"/>
</svg>`;

    const iconSizes = [
      { size: 16, name: 'favicon-16x16.png', label: 'Favicon 16x16' },
      { size: 32, name: 'favicon-32x32.png', label: 'Favicon 32x32' },
      { size: 192, name: 'icon-192x192.png', label: 'Android Icon' },
      { size: 512, name: 'icon-512x512.png', label: 'iOS/Android Icon' }
    ];

    function showStatus(message) {
      const status = document.getElementById('status');
      status.textContent = message;
      status.classList.add('show');
      setTimeout(() => status.classList.remove('show'), 3000);
    }

    function svgToCanvas(size) {
      return new Promise((resolve, reject) => {
        const img = new Image();
        const canvas = document.createElement('canvas');
        canvas.width = size;
        canvas.height = size;
        const ctx = canvas.getContext('2d');

        img.onload = () => {
          ctx.drawImage(img, 0, 0, size, size);
          resolve(canvas);
        };

        img.onerror = reject;
        img.src = 'data:image/svg+xml;base64,' + btoa(unescape(encodeURIComponent(svgContent)));
      });
    }

    function downloadCanvas(canvas, filename) {
      canvas.toBlob(blob => {
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = filename;
        a.click();
        URL.revokeObjectURL(url);
        showStatus(`âœ… ${filename} ë‹¤ìš´ë¡œë“œ ì™„ë£Œ!`);
      });
    }

    async function generateAllIcons() {
      const grid = document.getElementById('iconGrid');
      grid.innerHTML = '';

      showStatus('ğŸ”„ ì•„ì´ì½˜ ìƒì„± ì¤‘...');

      for (const icon of iconSizes) {
        try {
          const canvas = await svgToCanvas(icon.size);

          const item = document.createElement('div');
          item.className = 'preview-item';

          const clonedCanvas = canvas.cloneNode(true);
          const ctx = clonedCanvas.getContext('2d');
          ctx.drawImage(canvas, 0, 0);

          item.innerHTML = `
            <p>${icon.label}</p>
            <small>${icon.size}x${icon.size}</small>
          `;
          item.insertBefore(clonedCanvas, item.firstChild);

          const downloadBtn = document.createElement('button');
          downloadBtn.textContent = 'â¬‡ ë‹¤ìš´ë¡œë“œ';
          downloadBtn.onclick = () => downloadCanvas(canvas, icon.name);
          item.appendChild(downloadBtn);

          grid.appendChild(item);
        } catch (error) {
          console.error('Error generating icon:', error);
          showStatus('âŒ ì•„ì´ì½˜ ìƒì„± ì‹¤íŒ¨: ' + error.message);
        }
      }

      // favicon.icoëŠ” 32x32 PNGë¥¼ .ico í™•ì¥ìë¡œ ì €ì¥
      const faviconCanvas = await svgToCanvas(32);
      const faviconItem = document.createElement('div');
      faviconItem.className = 'preview-item';
      faviconItem.innerHTML = `
        <p>Favicon</p>
        <small>32x32 (save as .ico)</small>
      `;
      const faviconClone = faviconCanvas.cloneNode(true);
      const ctx = faviconClone.getContext('2d');
      ctx.drawImage(faviconCanvas, 0, 0);
      faviconItem.insertBefore(faviconClone, faviconItem.firstChild);

      const faviconBtn = document.createElement('button');
      faviconBtn.textContent = 'â¬‡ ë‹¤ìš´ë¡œë“œ';
      faviconBtn.onclick = () => {
        // PNGë¡œ ë‹¤ìš´ë¡œë“œí•˜ë˜, ì‚¬ìš©ìê°€ ìˆ˜ë™ìœ¼ë¡œ .icoë¡œ ë³€ê²½í•˜ë„ë¡ ì•ˆë‚´
        downloadCanvas(faviconCanvas, 'favicon.png');
        alert('ë‹¤ìš´ë¡œë“œí•œ favicon.png íŒŒì¼ì„ favicon.icoë¡œ ì´ë¦„ì„ ë³€ê²½í•˜ì—¬ í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— ë„£ìœ¼ì„¸ìš”.');
      };
      faviconItem.appendChild(faviconBtn);
      grid.appendChild(faviconItem);

      showStatus('âœ… ëª¨ë“  ì•„ì´ì½˜ ìƒì„± ì™„ë£Œ!');
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ìƒì„±
    window.addEventListener('load', () => {
      setTimeout(generateAllIcons, 500);
    });
  </script>
</body>
</html>
